.nr _0 \n(c.
.\"	@(#)sh.me	2.1	8/18/80
.\" This version has had comments stripped; an unstripped version is available.
.de sh
.if (\\n(si>0)&(\\n(si<1n) \
.	nr si \\n(sin
.ce 0
.@d "\\$1" +1 \\$3 \\$4 \\$5 \\$6 \\$7 \\$8
.if !"\\$2"_" \
\{\
.	ds |x \&\\$2
.	$p "\\*(|x" "\\*($n" \\n($0
.	$0 "\\*(|x" "\\*($n" \\n($0
.	rm |x
.\}
.nr $p 0 1
..
.de @d
.if !""\\$1" \
.	nr $0 \\$1
.if \\n($0&(\\n(.$>1) \
.	nr $\\n($0 \\$2
.ds $n \&\"
.ie \\n($0>=1 \
\{\
.	if \\n($1=0 \
.		nr $1 1
.	if (\\n(.$>=3) .if !"\\$3"-" \
.		nr $1 \\$3
.	as $n \\n($1
.\}
.el \
.	nr $1 0
.ie \\n($0>=2 \
\{\
.	if \\n($2=0 \
.		nr $2 1
.	if (\\n(.$>=4) .if !"\\$4"-" \
.		nr $2 \\$4
.	as $n .\\n($2
.\}
.el \
.	nr $2 0
.ie \\n($0>=3 \
\{\
.	if \\n($3=0 \
.		nr $3 1
.	if (\\n(.$>=5) .if !"\\$5"-" \
.		nr $3 \\$5
.	as $n .\\n($3
.\}
.el \
.	nr $3 0
.ie \\n($0>=4 \
\{\
.	if \\n($4=0 \
.		nr $4 1
.	if (\\n(.$>=6) .if !"\\$6"-" \
.		nr $4 \\$6
.	as $n .\\n($4
.\}
.el \
.	nr $4 0
.ie \\n($0>=5 \
\{\
.	if \\n($5=0 \
.		nr $5 1
.	if (\\n(.$>=7) .if !"\\$7"-" \
.		nr $5 \\$7
.	as $n .\\n($5
.\}
.el \
.	nr $5 0
.ie \\n($0>=6 \
\{\
.	if \\n($6=0 \
.		nr $6 1
.	if (\\n(.$>=8) .if !"\\$8"-" \
.		nr $6 \\$8
.	as $n .\\n($6
.\}
.el \
.	nr $6 0
..
.de sx
.ce 0
.ul 0
.nr _0 \\n($0-1
.if \\n(.$ .nr _0 +1
.if \\n(.$ .nr _0 \\$1
.@d \\n(_0
.rr _0
.$p "" "" \\n($0
.nr $p 0 1
..
.de uh
.$p "\\$1"
.$0 "\\$1"
..
.if \n(sf<=0 \
.	nr sf 8
.if \n(sp<=0 \
.	nr sp 10
.if \n(ss<=0 \
.	nr ss 12p
.if \n(si<=0 \
.	nr si 0
.nr c. \n(_0
