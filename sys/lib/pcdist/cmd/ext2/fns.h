void	chat(char*, ...);
Xfile *	clean(Xfile*);
void	dirdump(void*);
int	dosfs(Xfs*);
int	emptydir(Xfile*);
int	falloc(Xfs*);
int	fileaddr(Xfile*, int, int);
int	getfat(Xfs*, int);
int	getfile(Xfile*);
Xfs *	getxfs(char*);
void	panic(char*, ...);
void	putfat(Xfs*, int, int);
void	putfile(Xfile*);
void	rattach(void);
void	rclone(void);
void	rclunk(void);
void	rcreate(void);
void	refxfs(Xfs*, int);
void	rflush(void);
void	rnop(void);
void	rauth(void);
void	ropen(void);
void	rread(void);
void	rremove(void);
void	rsession(void);
void	rstat(void);
void	rwalk(void);
void	rwrite(void);
void	rwstat(void);
long	writefile(Xfile*, void*, long, long);
char *	xerrstr(int);
Xfile *	xfile(int, int);
int	xfspurge(void);

int ext2fs(Xfs *);
int get_inode( Xfile *, uint);
int getname(Xfile *, char *);
int get_file(Xfile *, char *);
int bmap( Xfile *f, int block );
int ffz(int);
long	readdir(Xfile*, void*, long, long);
long	readfile(Xfile*, void*, long, long);
void dostat(Xfile *, Dir *);
int new_block( Xfile *, int);
int test_bit(int, void *);
int set_bit(int, void *);
int  clear_bit(int , void *);
void *memscan(void *, int, int);
int find_first_zero_bit(void *, int);
int find_next_zero_bit(void *, int, int);
int block_getblk(Xfile *, int, int);
int inode_getblk(Xfile *, int);
int getblk(Xfile *, int);
int  new_inode(Xfile *, int);
int add_entry(Xfile *, char *, int);
int create_file(Xfile *, char *, int);
int create_dir(Xfile *, char *, int);
int unlink(Xfile *);
int  delete_entry(Xfs *, Inode *, int);
int  free_block_inode(Xfile *);
void free_block( Xfs *, ulong);
void free_inode( Xfs *, int);
int empty_dir(Xfile *);
int truncfile(Xfile *);
int dowstat(Xfile *, Dir *);
long getmode(Xfile *);
Ext2 getext2(Xfs *, char, int);
void CleanSuper(Xfs *);

/* Iobuf operations */

Iobuf *getbuf(Xfs *, long addr);
void putbuf(Iobuf *);
void purgebuf(Xfs *);
void iobuf_init(void);
int xread(Xfs *, Iobuf *, long);
void syncbuf(void);
void xwrite(Iobuf *);
void dirtybuf(Iobuf *);

void mchat(char *fmt, ...);
void dumpbuf(void);