# k10 cpu server w local fossil root
dev +dev
	root
	cons
	arch
	env
	pipe
	proc
	mnt
	srv
	dup
	rtc
	ssl
	tls
	cap
	pnp		pci
	kprof
	segment
	ether		netif
	ip		arp chandial ip ipv6 ipaux iproute netlog nullmedium pktmedium
	fs
	uart
	sd

#	draw		screen vga vgax
#	mouse		mouse
#	vga
#	kbmap
# needed for usb kbd input via scan codes
#	kbin
#	usb

sd +dev
	sdahci		pci sdscsi
	sdnvme		pci sdscsi

uart +dev
	uarti8250
#	uartpci		pci
#	uartox		pci

ip +dev
	tcp
	udp
	ipifc
	icmp
	icmp6
#	ipmux

link +dev
# order of ethernet drivers should match that in ../pcboot/boot so that
# devices are detected in the same order by bootstraps and kernels
# and thus given the same controller numbers.  put fastest first.
# 10 Gb/s
	etherxgbe	pci
# gigabit
#	etherigbepci	pci ethermii
	etherigbe	pci

	ethermedium
	loopbackmedium
	netdevmedium
#	usbehci		usbehcipc

misc +dev
	cache
	mp		apic ioapic pci sipi

#
#boot cpu
#	int cpuflag = 1;
#boot cpu boot $3
#	int cpuflag = 1;
#	char* bootdisk = "$3";
#boot rootdir $3
#	char* rootdir = "$3";
#boot (bboot|romboot|dosboot)
#	int cpuflag = 1;
#	char* bootprog = $2;
#boot boot $3
#	char* bootdisk = "$3";
#
boot cpu boot #S/sdE0/
	tcp
	local

rootdir
	boot$CONF.out boot
	/amd64/bin/ip/ipconfig ipconfig
	/amd64/bin/ramfs
	/amd64/bin/auth/factotum factotum
# compiling it in allows early keyboard and partfs use
#	/amd64/bin/usb/usbd
	/amd64/bin/fossil/fossil
	/amd64/bin/venti/venti
# needed to boot from a usb key and use its fossil
	/amd64/bin/disk/partfs

conf
	int cpuserver = 1;

dbgflg
#	apic		'A'
#	sysproc		'E'
#	ioapic		'I'
#	mp		'M'
#	pci		'P'
#	arch		'V'
#	archk10		'V'
#	asm		'a'
#	chan		'c'
#	mmu		'm'
#	main		'x'
#	sipi		'y'
amd64
	l32p
	l64v
	l64idt
	l64syscall
	l64fpu
	apu
	arch
	archk10
	asm
	cga
	bootconf
	fpu
	i8080
	i8254
	i8259
# only needed for VMs
	kbd
	main
	map
	mmu
	multiboot
	noacpi
	trap
	vsvm
port
	alarm
	allocb
	awaitbit
	byteserial
	chan
	ctype
	dev
	devtab
	edf
	fault
	image
	latin1
	logpow
	page
	parse
	pgrp
	portclock
	prf
	print
	proc
	ps
	qio
	qlock
	qmalloc
	random
	rebootcmd
	segment
	sysauth
	syscall
	syscallfmt
	sysfile
	sysproc
	sysseg
	systab
	taslock
	tod
	watermarks

#
# controls which directories to look in for source files; must be relative to ..
#dir
# pc		-.I.
#
dir
	386
	ip
	port

lib
	libip
	libsec
	libmp
	libc
