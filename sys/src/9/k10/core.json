{
    "Name": "core",
    "Projects": ["clean.json", "inith.json", "../boot/bootconf.json"],
    "SourceFiles":[
	"entry.S",
	"vsvm.c",
	"l64v.S",
	"l64fpu.S",
	"cpuidamd64.S",
	"l64acidt.S",
	"l64idt.S",
	"l64vsyscall.S",
	"acore.c",
	"apic.c",
	"arch.c",
	"archk10.c",
	"asm.c",
	"backtrace.c",
	"ctype.c",
	"devarch.c",
	"fpu.c",
	"i8254.c",
	"i8259.c",
	"ioapic.c",
	"main.c",
	"map.c",
	"memory.c",
	"mmu.c",
	"mp.c",
	"msi.c",
	"multiboot.c",
	"physalloc.c",
	"pmcio.c",
	"qmalloc.c",
	"sipi.c",
	"syscall.c",
	"systab.c",
	"tcore.c",
	"trap.c"
    ],
    "Pre": [
	"awk -v objtype=amd64 -f ../mk/parse -- -mkdevc $CONF > $CONF.c",
	"awk -f ../mk/mkenumb amd64.h > amd64l.h",
	"data2c boot_fs boot.fs >> $CONF.root.c",
	"awk -f ../mk/parse -- -mksystab ../../libc/9syscall/sys.h $CONF > systab.c",
	"awk -f ../mk/parse -- -mkerrstr $CONF > errstr.h"
    ],
    "Cflags": [
	"-mcmodel=kernel",
	"-O0",
	"-static",
	"-fplan9-extensions",
	"-ffreestanding",
	"-fno-builtin",
	"-DKERNDATE=1433623937",
	"-g",
	"-fvar-tracking",
	"-fvar-tracking-assignments",
	"-Wall",
	"-Wno-missing-braces",
	"-Wno-parentheses",
	"-Wno-unknown-pragmas",
	"-Wuninitialized",
	"-Wmaybe-uninitialized"
    ],
    "Libs": [
	"/amd64/lib/klibc.a",
	"/amd64/lib/klibip.a",
	"/amd64/lib/klibdraw.a"
    ],
    "Oflags": [
	"-z",
	"max-page-size=0x1000",
	"-nostdlib",
	"-g",
	"-T",
	"kernel.ld"
    ],
    "Post": [
	"objcopy -I elf64-x86-64 -O elf32-i386 9$CONF 9$CONF.32bit",
	"objdump -S 9$CONF > 9$CONF.asm"
    ]
}
