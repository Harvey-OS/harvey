#!/bin/rc

rfork n
switch($1){
case -r
	shift
	opt=''
case *
	opt=-r
}

switch($1){
case \
	alice\
	astrohub\
	bell-labs-gw\
	bopp\
	cadence\
	doria\
	edmund\
	filthy\
	hati\
	khan\
	lutece\
	mmacplus\
	nalice\
	nslocum\
	nvex\
	reboot\
	rohna\
	trauma\
	util\
	vasa\
	verifiler\
	vex
	server=bones
case *
	server=dinar
}

if(! test -e /mnt/consoles/$1){
	switch($sysname){
	case $server
		mount /srv/consoles /mnt/consoles
	case *
		import $server /mnt/consoles
	}
}

if(! test -e /mnt/consoles/$1 && test -e /srv/consoles)
	mount /srv/consoles /mnt/consoles

if(! test -e /mnt/consoles/$1){
	echo console not found
	exit 'console not found'
}

con -l $opt /mnt/consoles/$1

